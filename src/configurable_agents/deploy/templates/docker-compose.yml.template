version: '3.8'

services:
  workflow:
    build: .
    container_name: ${container_name}
    ports:
      - "${api_port}:8000"
      - "${mlflow_port}:5000"
    environment:
      # API keys loaded from .env file
      - GOOGLE_API_KEY=$${GOOGLE_API_KEY}
      - SERPER_API_KEY=$${SERPER_API_KEY}
    volumes:
      # Persist MLFlow data across container restarts
      - ./mlflow.db:/app/mlflow.db
    restart: unless-stopped

# Test Config 11: SQLite Storage Persistence
# Purpose: Verify workflow run persistence in SQLite
# Test: configurable-agents run test_configs/11_with_storage.yaml --input message="Test storage"
# Verify: Check workflow_runs table in storage.db

schema_version: "1.0"

flow:
  name: test_11_storage
  description: Workflow with SQLite storage for run history
  version: "1.0.0"

state:
  fields:
    message:
      type: str
      required: true
      description: Input message
    response:
      type: str
      default: ""
      description: Output response

nodes:
  - id: process
    description: Process message (run will be stored)
    prompt: |
      Message: {state.message}
      Respond briefly.
    outputs: [response]
    output_schema:
      type: object
      fields:
        - name: response
          type: str
          description: Response

edges:
  - from: START
    to: process
  - from: process
    to: END

config:
  llm:
    provider: google
    model: gemini-2.5-flash-lite
    temperature: 0.7

  # Storage configuration
  storage:
    enabled: true
    backend: sqlite
    path: "storage_test.db"
